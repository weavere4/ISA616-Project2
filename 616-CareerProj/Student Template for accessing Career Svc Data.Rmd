---
title: "FSB Placement Data Insights Project"
author: "Elijah Weaver & Molly Wimer"
output:
  html_document:
    date: "`r format(Sys.time(), '%d %B, %Y')`"
    code_folding: hide
    df_print: paged
    number_sections: yes
    theme: cerulean
    toc: yes
    toc_float: yes
    code_download: true
  word_document:
    toc: no
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,message=FALSE,warning=FALSE)

#package intialization
rm(list = ls()) # clear global environment
graphics.off() # close all graphics
if(require(pacman)==FALSE) install.packages("pacman")
pacman::p_load(DataExplorer,tidyverse,readxl,zoo,stargazer,kableExtra,skimr,plotly,ggpubr,vtable,tm)
```
# Description of the Audience and Purpose of your Project

![](images/BusValPropTemplate-Yao.drawio.png)

# Data Sources

**Description of the Data**

This data was entered by students, meaning that there are many inconsistencies with the way that the data was entered. For example, for job location of Cincinnati, the students could enter "Cincinnati, OH" or "cincinnati" or "Cincinnati, OH, USA". There are several variables that are incorrectly coded like year, gender, GPA range, race, survey_pref, location_pref, field_pref. In order to get meaning from these variables, they need to be manipulated before analyzing. There are 3235 total observations in the dataset. 

## Read in the data

```{r}
data=readRDS(file = "FSB_BI_Survey_2019_2021.rds")
```

# Data Preprocessing

Describing each data preprocessing step with small chunks of code, output where necessary, and documentation

```{r}
state_mapping <- c(
    'oh' = 'OH',
    'ohio' = 'OH',
    'ohio / usa' = 'OH',
    'ny' = 'NY',
    'ga' = 'GA',
    'il' = 'IL',
    'ca' = 'CA',
    'ks' = 'KS',
    'new york' = 'NY',
    'mn' = 'MN',
    'nc' = 'NC',
    'ky' = 'KY',
    'tx' = 'TX',
    'oh, usa' = 'OH',
    'illinois' = 'IL',
    'd.c.' = 'DC',
    'nv' = 'NV',
    'in' = 'IN',
    'wi' = 'WI',
    'ma' = 'MA',
    'michigan, detroit' = 'MI',
    'co' = 'CO',
    'indiana' = 'IN',
    'minnesota' = 'MN',
    'wa' = 'WA',
    'washington d.c/united states' = 'DC',
    'nj' = 'NJ',
    'ut' = 'UT',
    'mo' = 'MO',
    'mi' = 'MI',
    'ia' = 'IA',
    'pennsylvania' = 'PA',
    'remote' = 'Remote',
    'oh' = 'OH',
    'il/usa' = 'IL',
    'pa' = 'PA',
    'ohio/usa' = 'OH',
    'north carolina' = 'NC',
    'washington' = 'WA',
    'va' = 'VA',
    'il' = 'IL',
    'ri' = 'RI',
    'az' = 'AZ',
    'georgia, usa' = 'GA',
    'me' = 'ME',
    'ct' = 'CT',
    'massachusetts, usa' = 'MA',
    'md' = 'MD',
    'tba / usa' = 'TBA',
    'florida' = 'FL',
    'fujian province' = 'Fujian',
    'california' = 'CA',
    'michigan' = 'MI',
    'ohio/united states' = 'OH',
    'wisconsin' = 'WI',
    'illinois / usa' = 'IL',
    'tn' = 'TN',
    'montana' = 'MT',
    'mi / u.s.' = 'MI',
    'kansas' = 'KS',
    'na' = 'N/A',
    'ohio / the united states' = 'OH',
    'georgia' = 'GA',
    'new york' = 'NY',
    'il, usa' = 'IL',
    'tbd' = NA,
    'oh/us' = 'OH',
    'ar' = 'AR',
    'virginia/ usa' = 'VA',
    'texas' = 'TX',
    'virginia (va)' = 'VA',
    'india' = 'India',
    'rhode island' = 'RI',
    'ohio/ united states' = 'OH',
    'il, united states' = 'IL',
    'oh/usa' = 'OH',
    'illinois/ us' = 'IL',
    'kentucky' = 'KY',
    'china' = 'China',
    'illinois/usa' = 'IL',
    'fl' = 'FL',
    'illinois, usa' = 'IL',
    'oregon' = 'OR',
    'ms' = 'MS',
    'illinois' = 'IL',
    'ohio, usa' = 'OH',
    'usa' = 'USA',
    'dc' = 'DC',
    'la' = 'LA',
    'delaware' = 'DE',
    'il, us' = 'IL',
    'colorado' = 'CO',
    'il' = 'IL',
    'texas/ usa' = 'TX',
    'connecticut' = 'CT',
    'ohio / united states' = 'OH',
    'ohio' = 'OH',
    'sc' = 'SC',
    'tennessee' = 'TN',
    'n/a' = 'N/A',
    'montenegro' = 'Montenegro',
    'belize' = 'Belize',
    'ireland' = 'Ireland',
    'na' = 'N/A',
    'nh' = 'NH',
    'district of columbia' = 'DC',
    'us' = 'USA',
    'canada' = 'Canada',
    'new york, usa' = 'NY',
    'tx/usa' = 'TX',
    'il/ usa' = 'IL',
    'ne' = 'NE',
    'new york' = 'NY',
    'nan' = NA,
    'in / usa' = 'IN',
    'wisconsin / usa' = 'WI',
    'ma / usa' = "MA",
    'virginia' = "VA",
    'colorado/ united states' = 'CO',
    'nebraska' = "NE",
    'maine' = "ME",
    'united states' = 'USA',
    'zhejiang province' = 'China'
)

undecided_values <- c(
  "Undecided",
  "Not sure, maybe NYU",
  "Not decided yet",
  "Unsure",
  "Not decided",
  "I haven't decided yet. :)",
  "No yet",
  "have not chosen yet",
  "not sure",
  "I haven't decided yet.",
  "not decided",
  "Not revive offers yet"
)

city_mapping <- c(
  "New york" = "New York City",
  "Witchita" = "Wichita",
  "new york" = "New York City",
  "Indianpolis" = "Indianapolis",
  "Washington, D.C" = "Washington",
  "Washington DC" = "Washington",
  "Washington, D.C." = "Washington",
  "Washington D.C" = "Washington",
  "New York CIty" = "New York",
  "Cincinatti" = "Cincinnati",
  "Findlay (Tentative)" = "Findlay",
  "Cincinnnati" = "Cincinnati",
  "Philadephia" = "Philadelphia",
  "cleveland" = "Cleveland",
  "chicago" = "Chicago",
  "Sylvania" = "Sylvania",
  "Forth Worth" = "Fort Worth",
  "Fort Lauderdale" = "Fort Lauderdale",
  "Fort Myers" = "Fort Myers",
  "Ft Myers" = "Fort Myers",
  "NYC" = "New York City",
  "Mt. Healthy" = "Mt. Healthy",
  "Philadephia" = "Philadelphia",
  "Ft. Myers" = "Fort Myers",
  "Cincinnati, OH" = "Cincinnati",
  "boston" = "Boston",
  "Brooklyn" = "New York City",
  "Brooklyn Heights" = "New York City",
  "Manhattan" = "New York City",
  "North Canton, Ohio" = "North Canton",
  "Westerville (Columbus)" = "Westerville",
  "Chandler, AZ" = "Chandler",
  "To Be Determined" = NA,
  "Blue ash" = "Blue Ash",
  "Not Available" = NA,
  "Springfield, OH" = "Springfield",
  "Various" = NA,
  "August" = "Augusta",
  "CLEVELAND" = "Cleveland",
  "Colubmus" = "Columbus",
  "Hamiliton" = "Hamilton",
  "Indiana" = "Indianapolis",
  "New York" = "New York City",
  "Washinton" = "Washington",
  "na" = NA,
  "nan" = NA,
  "TBD" = NA,
  "Don't Know Yet" = NA,
  "N/A" = NA
)

honors_levels <- c("Cum laude", "Summa Cum Laude", "Magna Cum Laude")
```

Utilziing the mapping lists and tidyverse code to mutate, standardize, and clean the data

```{r}
data <- data %>%
  #formalizing the state column to be standardized
  mutate(survey_state = ifelse(tolower(survey_state) %in% names(state_mapping), state_mapping[tolower(survey_state)], survey_state)) %>% 
  # mutating all values that point to uncertainty or not knowing to be a single column called undecided
  mutate(survey_gradschool = ifelse(survey_gradschool %in% undecided_values, "Undecided", survey_gradschool)) %>%
  # Map the city column the same way as the state column
  mutate(survey_city = ifelse(survey_city %in% names(city_mapping), city_mapping[(survey_city)], survey_city)) %>% 
  #Getting rid of values that are not condusive with the column and making it an integer
  mutate(survey_offers = ifelse(survey_offers %in% c("multiple", "an","2+"), NA, as.integer(survey_offers))) %>% 
  #Getting rid of values that are not condusive with the column and making it an integer
  mutate(survey_internships = ifelse(survey_internships %in% c("RPT", "N/A"), NA, as.integer(survey_internships))) %>% 
  # Turns survey pref location into a binary indecator
  mutate(survey_pref_loc = as.numeric(ifelse(survey_pref_loc == "Yes", 1, ifelse(survey_pref_loc == "No", 0, NA)))) %>%
  # turns pref field into a binary indicator
  mutate(survey_pref_field = as.numeric(ifelse(survey_pref_field == "Yes", 1, ifelse(survey_pref_field == "No", 0, NA)))) %>%
  # makes the altin honors valriable a factor
  mutate(latin_honors = factor(latin_honors, levels = honors_levels)) %>% 
  # makes gender a factor
  mutate(Gender = factor(Gender)) %>% 
  # Making Race Ethnicity a factor as its fixed values
  mutate(IPEDS.Race.Ethnicity = factor(IPEDS.Race.Ethnicity)) %>% 
  # Doing the same with year
  mutate(year.x = factor(year.x)) %>% 
  # Doing the same with GPS.Range
  mutate(GPA.Range = factor(GPA.Range)) %>% 
  # Doing the same with survey plans
  mutate(survey_plans = factor(survey_plans)) %>% 
  # Getting rid of three variables that have no meaning per the data dictionary
  select(-BBRJ) %>% 
  select(-`Study Abroad Courtesy Account`) %>% 
  select(-`Transfer Work (Pre-Banner)`)
```
```{r}
#Summary statistics to get an easy overview of what the data looks like now
summary_data <- data.frame(
  DataType = sapply(data, class),
  NAs = sapply(data, function(x) sum(is.na(x)))
)

print(summary_data)
```

In our data cleaning process, we tackled various tasks to ensure our dataset was accurate and ready for analysis. One of the key aspects we addressed was the standardization of location data, particularly the 'survey_state' and 'survey_city' columns. We observed that there were issues like misspelled entries, inconsistent capitalization, or different formats used to represent the same places. To effectively understand where students are moving and seeking jobs, we needed a clean and uniform representation of these locations.

To achieve this, we developed a mapping list and applied it to correct all non-standard values. This made all entries consistent and allowed for easier analysis.

We applied a similar approach to the 'grad school' column, where we noticed multiple answers referencing 'undecided.' We standardized these entries to create a more consistent dataset.

For the 'internships' and 'offers' columns, we transformed the data into numeric values to ensure the correct data type. During this process, any values that were not numeric or were ambiguous were converted to 'n/a' to maintain data integrity.

Next, we reviewed the data types of various columns, such as 'latin_honors,' 'years,' 'gender,' 'pref_field,' and 'pref_loc,' and adjusted them to the appropriate data types to ensure accurate analysis.

Finally, we removed certain columns, namely 'BBRJ,' 'study abroad courtesy account,' and 'transfer work.' These columns were deemed to have no meaningful value according to the documentation and were therefore eliminated from our dataset.


# Computing Enviroment

```{r}
sessionInfo()
```
